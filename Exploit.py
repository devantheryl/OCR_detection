# -*- coding: utf-8 -*-
"""
Created on Mon Sep 12 14:35:24 2022

@author: LDE
"""

import neoapi
import time 
# write the image callback
class ImageCallback:
    def imgcallback(self, image):
        print("received image: ", image.GetImageID(),
            " size: ", image.GetSize(), " height: ", image.GetHeight(),
            " width: ", image.GetWidth(), " pixelformat: ", image.GetPixelFormat())
        
        
camera = neoapi.Cam()
camera.Connect()                                        # connect to a camera
camera.f.ExposureTime = 40
camera.f.TriggerMode = neoapi.TriggerMode_On            # bring camera in TriggerMode
camera.f.TriggerSource = neoapi.TriggerSource_Software
callback = ImageCallback()
camera.EnableImageCallback(callback.imgcallback)        # enable the callback
for i in range(5):                                      # send 5 triggers to retrieve some image callbacks
    camera.f.TriggerSoftware.Execute()
    time.sleep(0.100)
camera.DisableImageCallback()                           # disable callback